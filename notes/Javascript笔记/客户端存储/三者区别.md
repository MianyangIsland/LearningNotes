# Cookie,session与token的区别

Cookie实际上是一小段的文本信息。 Cookies是由服务器产生的。 当浏览器第一次访问服务端时，服务器此时肯定不知道他的身份，所以创建一个独特的身份标识数据，格式为key=value，放入到Set-Cookie字段里，随着响应报文发给浏览器。浏览器看到有Set-Cookie字段以后就知道这是服务器给的身份标识，于是就保存起来，下次请求时会自动将此key=value值放入到Cookie字段中发给服务端。服务端收到请求报文后，发现Cookie字段中有值，就能根据此值识别用户的身份然后提供数据。

Session机制是一种服务端的机制 ，服务器使用一种类似散列表的结构来保存信息。当程序需要为某个客户端的请求创建一个session的时候 ，服务器首先检查这个客户端里的请求里是否已包含了一个session标识-session ID ,如果已经包含一个session ID ，则说明已经为此客户端创建过session，服务器就按照session ID把这个session检索出来使用。如果客户端请求不包含session lD，则为此客户端创建一个session并且声称一个与此session相关联的session ID ，session ID的值应该是一个既不会重复 ，又不容易被找到规律以仿造的字符串(服务器会自动创建)，这个session ID将被在本次响应中返回给客户端保存。



Cookie和session的区别

  1.cookie数据存放在客户的浏览器上,session数据放在服务器上.

   2.cookie不是很安全,别人可以分析存放在本地的cookie并进行cookie欺骗.

  3.session会在一定时间内保存在服务器上,当访问增多,会比较占用服务器的性能.

   4.单个cookie保存的数据不超过4k,很多浏览器都限制一个站点最多保存20个cookie.

所以 : 将登录信息等重要信息存放在cookie.  其他信息如果需要保留,可以存放在cookie中.

Token是在服务端将用户信息经过Base64Url编码过后传给在客户端，每次用户请求的时候都会带上这一段信息，因此服务端拿到此信息进行解密后就知道此用户是谁了，这个方法叫做JWT(JSON Web Token)。  Token类似一个令牌，无状态的，服务端所需的信息被Base64编码后放到Token中，服务器可以直接解码出其中的数据。

Token相比较于Session的优点在于，当后端系统有多台时，由于是客户端访问时直接带着数据，因此无需做共享数据的操作。

Token的优点:

简洁：可以通过URL,POST参数或者是在HTTP头参数发送，因为数据量小，传输速度也很快 

自包含：由于字符串包含了用户所需要的信息，避免了多次查询数据库，因为Token是以JSON的形式保存在客户端的，所以JWT是跨语言的，不需要在服务端保存会话信息，特别适用于分布式微服务 .session 和 token并不矛盾，作为身份认证 token安全性比session好，因为每个请求都有签名还能防止监听以及重放攻击，而session就必须靠链路层来保障通讯安全了。如上所说，如果你需要实现有状态的会话，仍然可以增加session来在服务器端保存一些状态 

token与cookie的区别:

Cookie是不允许垮域访问的，但是token是支持的， 前提是传输的用户认证信息通过HTTP头传输；



总结:

token就是令牌，比如你授权（登录）一个程序时，他就是个依据，判断你是否已经授权该网站；cookie就是写在客户端的一个txt文件，里面包括你登录信息之类的，这样你下次在登录某个网站，就会自动调用cookie自动登录用户名；session和cookie差不多，只是session是写在服务器端的文件，也需要在客户端写入cookie文件，但是文件里是你的浏览器编号Session的状态是存储在服务器端，客户端只有session id；

而Token的状态是存储在客户端。